// Code generated by icomplie. DO NOT EDIT!

import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';
import { HttpClient } from './httpClient';

export class AxiosHttpClient implements HttpClient {
  private client: AxiosInstance;

  constructor(baseURL: string, config?: AxiosRequestConfig) {
    this.client = axios.create({
      baseURL,
      ...config,
    });
  }

  async doPost<T>(url: string, body?: any, headers?: Record<string, string>): Promise<T> {
    const response = await this.client.post<T>(url, body, { headers });
    return response.data;
  }

  async doGet<T>(url: string, headers?: Record<string, string>): Promise<T> {
    const response = await this.client.get<T>(url, { headers });
    return response.data;
  }

  async doPut<T>(url: string, body?: any, headers?: Record<string, string>): Promise<T> {
    const response = await this.client.put<T>(url, body, { headers });
    return response.data;
  }

  buildUrl(basePath: string, params: Record<string, string | number>): string {
    const searchParams = new URLSearchParams();
    Object.entries(params).forEach(([key, value]) => {
      searchParams.append(key, String(value));
    });
    const queryString = searchParams.toString();
    return queryString ? `${basePath}?${queryString}` : basePath;
  }

  // Get the underlying axios instance for adding interceptors, etc.
  getAxiosInstance(): AxiosInstance {
    return this.client;
  }
}
